---
title: 由Weex-Toolkit引起的权限问题
tags:
  - weex
categories:
  - 手记
date: 2017-08-05 12:30:23
---

# 问题

在安装weex-toolkit的时候，出现如下错误

```bash
Failed at the xtoolkit@0.2.7 postinstall script.
```

这是由于Mac系统下安装weex-toolkit时`~/.xtoolkit`权限不足引起的。

因此，只要`cd`到该目录下`sudo chmod 777 dirName`(dirName为需要修改的目录或者文件)就可以了（如果不行的话同样查看`/usr/local/lib/node_modules`的权限问题）

# 解释

下面开始抄作业解释这个问题


**Unix系统的权限分三种，分别是Owner、Group、Other，用`ls -l`可以查看文件的权限。**

![](/images/2017/local-bash.png)

*每个项目前面那一串乱七八糟的字母和横杠，就是权限。第一位比较简单，指的是文件类型：-代表普通文件，d代表文件夹，Unix下文件夹是特殊的文件。后面9位分三组，每组就代表了对应用户的权限：*

![](/images/2017/010.png)

+ r = 4: 读
+ w = 2: 写
+ x = 1: 执行

*现在看一下上面那个图的bin目录，它的权限是drwxr-xr-x就可以解读为：*

+ d: *这是个目录*
+ rwx: *拥有者（也就是Learning）可读、可写、可执行*
+ r-x: *用户组（也就是admin）可读、可执行、但不可写*
+ r-x: *其它用户，跟用户组的权限一样*

### 为什么是1、2、4？

那么权限为什么是1、2、4呢？因为这是二进制：

+ 1: 001
+ 2: 010
+ 4: 100

这么做最主要有两个好处：节省空间和提升运算效率。

*Unix是上个世纪60年代末期产物，当时的资源甚是宝贵，因此，只用3个bit来保存权限，是很不错的选择。当然CPU时间也是很宝贵，不可能为了权限判断让你耗费那么多CPU时间，这种二进制权限适合于位运算，位运算众所周知是最快的。*

***警告：杜绝使用chmod 777，尤其是在生产环境！***
***谨用：使用不当会破坏系统的权限***

参考：

[当我们 chmod 777 的时候，干了些什么？](https://segmentfault.com/a/1190000006246645)

